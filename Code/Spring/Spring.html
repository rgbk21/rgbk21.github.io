<!DOCTYPE html>
<html>
<head>

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
            integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
            crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
            integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
            crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
          integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
            integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
            crossorigin="anonymous"></script>
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Roboto:400,500,700" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="Spring.css">
    <meta name="keywords" content="Java, Floats, Overflow, Unboxing, Autoboxing">
    <meta name="author" content="Raj Gaurav Ballabh Kumar">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spring - Notes</title>
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top">

    <div class="navbar-header">
        <a href="../../index.html" class="navbar-brand">rgbk21</a>
    </div>

    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"><span
            class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="nav navbar-nav">
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" role="button" data-toggle="dropdown" aria-haspopup="true"
                   aria-expanded="false">
                    Projects
                </a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                    <a class="dropdown-item" href="../../Projects/TwitterCritNodes/TwitterCritNodes_1.html">Identifying
                        Critical Nodes on Twitter</a>
                    <a class="dropdown-item" href="../../Projects/isRelatedTo/isRelatedTo.html">isRelatedTo</a>
                    <div class="dropdown-divider"></div>
                </div>
            </li>
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" role="button" data-toggle="dropdown" aria-haspopup="true"
                   aria-expanded="false">
                    HTML Projects
                </a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                    <a class="dropdown-item" href="../../ImageGallery/ImageGallery.html">Image Gallery</a>
                    <a class="dropdown-item" href="../../RGB_Guesser_Game/RGB.html">RGB Guesser Game</a>
                    <a class="dropdown-item" href="../../ToDoList/todo.html">To-Do List</a>
                    <div class="dropdown-divider"></div>
                </div>
            </li>
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" role="button" data-toggle="dropdown" aria-haspopup="true"
                   aria-expanded="false">
                    Notes
                </a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                    <a class="dropdown-item" href="../../COMS_631/COMS_631_index.html">COMS 631</a>
                    <a class="dropdown-item" href="../../COMS_535/COMS_535_index.html">COMS 535</a>
                    <div class="dropdown-divider"></div>
                </div>
            </li>
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" role="button" data-toggle="dropdown" aria-haspopup="true"
                   aria-expanded="false">
                    Code
                </a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                    <a class="dropdown-item" href="../../Code/ThingsToRemember/ThingsToRemember.html">Things To
                        Remember</a>
                    <a class="dropdown-item" href="../../Code/Java_Notes/JavaNotes.html">Java Notes</a>
                    <a class="dropdown-item" href="../../Code/Java_Notes/JavaNotes_2.html">Java Notes 2</a>
                    <a class="dropdown-item" href="../../Code/Applying_Java_Notes/ApplyingJava_Notes.html">ApplyingJava
                        Notes</a>
                    <a class="dropdown-item" href="../../Code/SQL/SQL.html">SQL Notes</a>
                    <a class="dropdown-item" href="../../Code/Spring/Spring.html">Spring Notes</a>
                    <a class="dropdown-item" href="../../Code/Kafka/Kafka.html">Kafka Notes</a>
                    <a class="dropdown-item" href="../../Code/Angular/Angular.html">Angular</a>
                    <a class="dropdown-item" href="../../Code/Hibernate/Hibernate.html">Hibernate</a>
                    <div class="dropdown-divider"></div>
                </div>
            </li>
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" role="button" data-toggle="dropdown" aria-haspopup="true"
                   aria-expanded="false">
                    In Another Life
                </a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                    <a class="dropdown-item" href="../../InAnotherLife/Chapter1.html">Chapter 1</a>
                    <div class="dropdown-divider"></div>
                </div>
            </li>
        </ul>


        <ul class="navbar-nav ml-auto">
            <li class="nav-item active"><a class="nav-link" href="https://github.com/rgbk21">GitHub</a></li>
            <li class="nav-item active"><a class="nav-link"
                                           href="https://www.linkedin.com/in/raj-gaurav-ballabh-kumar-97002058/">LinkedIn</a>
            </li>
            <li class="nav-item active"><a class="nav-link" href="https://www.instagram.com/wobblyframes/">Instagram</a>
            </li>
            <li class="nav-item active"><a class="nav-link"
                                           href="https://www.facebook.com/SomeRandomThoughts">Facebook</a></li>
        </ul>

    </div>
</nav>

<div class="container">

    <div>
        This page contains my notes from the following books: <br>
        a) Pro Spring Textbook <br>
        b) Baeldung REST API Spring Course <br>
    </div>

    <br>
    Index: <br>
    Module 0: <a href="#SpringAnnotations">Annotations</a>
    <br>
    Module 1: <a href="#Rest-Module1"> The Basics of REST with Spring</a>
    <br>
    Module 2: <a href="#Rest-Module2"> REST and HTTP Semantics</a>
    <br>

    <hr>
    <div id="Rest-Module1" class="chapter">Module 1: The Basics of REST with Spring</div>
    <hr>

    <div class="textual-content">

        <div class="sub-heading">Lesson 4: Properties and Project Settings</div>
        <div>
            -Relevant code can be found <a
                href="https://github.com/rgbk21/MySQL-CRUD/blob/master/src/main/java/com/example/demo/service/StartupLoggingComponent.java">here</a>.
            <br>
            - How do you split up your properties file, so that the app reads different property files depending upon
            the environment that it is in (dev, local, prod). See <a
                href="https://github.com/rgbk21/MySQL-CRUD/blob/master/src/main/java/com/example/demo/spring/PersistenceJPAConfig.java#L11">here</a>.
            <br>
            - What is the <code>InitializingBean</code>? It can be used to read property values that are specified in
            the classpath files in: <code>src/main/resources</code> <br>
            - What is the <code>Environment</code> and what is it used for? Read "Spring Configuration Tips" - Talk by
            Josh Long <a
                href="https://spring.io/blog/2020/04/23/spring-tips-configuration">here</a>.<br>

        </div>

        <div class="sub-heading">Lesson 5: The Web Configuration</div>
        <div>
            - Relevant code <a
                href="https://github.com/rgbk21/MySQL-CRUD/blob/master/src/main/java/com/example/demo/spring/WebConfig.java">here</a>.
            <br>
            - Consider a Client sending a HTTP request to the server. In the HTTP Headers of the request, the <code>Content-Type</code>
            specifies the type of the content in the body of the HTTP request. The <code>Accept</code> headers specifies
            the type of content that the Client accepts. The <code>Accept</code> header specified by the Client will be
            used to choose the appropriate Http Converter to marshall the entity. Read about how HTTP Converters work <a
                href="https://www.baeldung.com/spring-httpmessageconverter-rest">here on Baeldung</a>. <br>
            - Using HATEOAS changes the content-type returned by the server from <code>application/json</code> to <code>application/hal-json</code>.
            <br>
            - You can implement the <code>WebMvcConfigurer</code> class to do the following: <br>
            - You can enable <code>SerializationFeature.INDENT_OUTPUT</code> to indent the RAW JSON returned from your
            REST API.
            <br>
            - You can enable <code>DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES</code> to enable your API to not
            accept any fields that are not present on the Peristence objects.
        </div>

    </div>


    <hr>
    <div id="Rest-Module2" class="chapter">Module 2: REST and HTTP Semantics</div>
    <hr>

    <div class="textual-content">

        <div class="sub-heading">Lesson 1: Exception Handling and Sane HTTP Status Codes</div>
        <div>
            - Starting with Boot 2.3, we also need to explicitly add the spring-boot-starter-validation dependency (<a
                href="https://www.baeldung.com/spring-boot-bean-validation">Source</a>). <br>
            - If you use a constraint like <code>@NotNull</code> in your entity, then you need to also follow that up
            with <code>@Validated</code> or <code>@Valid</code> when you are passing in that object to a POST request.
            Only then will you get the 400 Bad Request error if the constraint is invalidated. Otherwise you will get a
            500 Internal Server Error. Check this <a
                href="https://stackoverflow.com/questions/58614373/how-to-convert-constraintviolationexception-500-error-to-400-bad-request">SO
            Link</a>. <br>
            - A global exception handler is created by extending the <code>ResponseEntityExceptionHandler</code> class.
            Also, you don't need to extend <code>ResponseEntityExceptionHandler</code> if you don't need all the
            exception mappings it provides (<a
                href="https://stackoverflow.com/questions/24338734/responseentityexceptionhandler-is-not-getting-called-when-exception-occurs">SO
            Source</a>) <br>
            - Handling exceptions is explained with diagrams <a
                href="https://jaxenter.com/guide-to-spring-boot-rest-api-error-handling-136631.html">here</a>.
        </div>


        <div class="sub-heading">Lesson 1: Exception Handling and Sane HTTP Status Codes pt2</div>
        <div>
            - <code>Throwables.getRootCause</code> from the Guava library can be used to get at the root cause of the
            <code>Exception</code>
            <br>
            - <code>findOne</code> vs <code>findById</code> vs <code>getOne</code> <a
                href="https://stackoverflow.com/questions/24482117/when-use-getone-and-findone-methods-spring-data-jpa">here
            on SO</a>.
            <br>
            - In order to mark a field as "Not Null" in the <code>@Entity</code> object, there are 2 ways that you can
            accomplish this - <br>
            a) Annotate it with <code>@NotNull</code> <br>
            b) Annotate it with <code>@Column(nullable = false)</code> <br>
            Remember to add the <code>@Valid</code> in front of the object when you are reading it as an argument as
            shown here in <a
                href="https://stackoverflow.com/questions/58614373/how-to-convert-constraintviolationexception-500-error-to-400-bad-request">this
            question</a>. <br>
            - Usage of <code>@ExceptionHandler</code> to catch and throw exceptions was discussed. Very useful
            discussion.<br>
            - Note how we are using <code>@ExceptionHandler</code>, with the class of the Exception types that we want
            the
            method to handle, being passed in as arguments to the annotation. We can do that because we have specified
            the <code>handleBadRequest</code> method as having an argument of type <code>RuntimeException</code>, hence
            both <code>DataIntegrityViolationException</code> and <code>MyBadRequestException</code> work as well. You
            can refer the code <a
                href="https://github.com/rgbk21/MySQL-CRUD/blob/master/src/main/java/com/example/demo/web/controller/exceptions/RestResponseEntityExceptionHandler.java#L33-L36">here</a>.
            <br>
        </div>


        <div class="sub-heading">Lesson 2: The Basics of Input Validation</div>
        <div>
            - <a href="https://courses.baeldung.com/courses/32653/lectures/5958204">Lecture Notes</a> <br>
            - Code available <a
                href="https://github.com/rgbk21/MySQL-CRUD/blob/master/src/main/java/com/example/demo/model/Student.java">here</a>.
            <br>
            - JSR-303 and JSR-349 are the standards of the validation. Apart from these, Hibernate also provides some
            other validations that are not a part of the standard but are very helpful. <br>
            - In Spring Boot, starting from version 2.3, the validation artifact has been moved from the web starter
            into a separate one: search for <code>spring-boot-starter-validation</code> on maven repo and add that to
            your project. <br>
            - Question: What should we do in the case of partial update? Which method should we use? <br>
            - <a
                href="https://stackoverflow.com/questions/2443324/best-practice-for-partial-updates-in-a-restful-service">Best
            practice for partial updates in a RESTful service</a>
            <br>
            - <a
                href="https://stackoverflow.com/questions/19732423/why-isnt-http-put-allowed-to-do-partial-updates-in-a-rest-api">Why
            isn't HTTP PUT allowed to do partial updates in a REST API?</a>
            <br>
            - <a
                href="https://softwareengineering.stackexchange.com/questions/191596/is-it-ok-to-partially-change-a-collection-with-put-or-delete/266705">Is
            it OK to partially change a collection with PUT or DELETE?</a> <br>
        </div>


        <div class="sub-heading">Lesson 3: Good URI Practices</div>
        <div>
            - Check <a href="https://www.vinaysahni.com/best-practices-for-a-pragmatic-restful-api">this</a> link
            explaining best practices for REST
            <br>
            - Lecture notes <a href="https://courses.baeldung.com/courses/32653/lectures/5958206">here</a>. <br>
            - Nouns vs Verbs. Always prefer nouns <br>
            - Plural vs Singular. Either works. But be consistent. <br>
            - IDs vs UUIDs. Eh.
        </div>


        <div class="sub-heading">Lesson 4: Leverage HTTP Verbs and Semantics</div>
        <div>
            - Lecture notes <a href="https://courses.baeldung.com/courses/32653/lectures/5958209">here</a>. <br>
            - Relevant code <a
                href="https://github.com/rgbk21/MySQL-CRUD/blob/master/src/main/java/com/example/demo/web/controller/StudentController.java#L47">here</a>.
            <a href="https://github.com/rgbk21/MySQL-CRUD/blob/master/src/main/java/com/example/demo/web/controller/StudentController.java#L47">This</a>
            is how the request for the pagination is handled.
            - What is <code>@Transactional</code> used for? <a
                href="https://www.marcobehler.com/guides/spring-transaction-management-transactional-in-depth">This
            link</a> goes into the details. <br>
        </div>


        <div class="sub-heading">Lesson 5: Support both XML and JSON</div>
        <div>
            - Lecture notes <a href="https://courses.baeldung.com/courses/32653/lectures/5958210">here</a>. <br>
            - Earlier there was the Xtream library. But now we can use the <code>jackson-dataformat-xml</code> library
            which is an extension of the existing Jackson JSON library. <code>woodstox-core-asl</code> is another
            library that we need. Woodstox is a high-performance XML processor that implements Stax (JSR-173) and SAX2
            APIs. Both SAX and StAX are stream / event oriented XML parsers. SAX uses a "push" model, and StAX uses a
            "pull" model. <br>
            - All you have to do is specify the above 2 dependencies in your Gradel file, and boom. Now the return type
            becomes XML. (The Content-type header is <code>"Content-Type":"application/xml;charset=UTF-8"</code>)
            <br>
            - <code>HeaderContentNegotiationStrategy</code> checks the "Accept" header of the HTTP Request.
        </div>


    </div>


    <hr>
    <div id="SpringAnnotations" class="chapter">Module 0: Annotations</div>
    <hr>

    <div class="textual-content">

        <div class="one-point">
            1) @Component
        </div>

        <div class="one-point">
            2) @Autowired
        </div>

        <div class="one-point">
            3) @Configuration
        </div>

        <div class="one-point">
            4) @ComponentScan
        </div>

        <div class="one-point">
            5) @EnableWebMVC
        </div>

        <div class="one-point">
            6) @ControllerAdvice
        </div>

        <div class="one-point">
            7) @RestControllerAdvice
        </div>

        <div class="one-point">
            8) @NotNull, @NotEmpty, @NotBlank <br>
            - Source on <a href="https://www.baeldung.com/java-bean-validation-not-null-empty-blank">baeldung</a>. <br>
            - @NotNull: a constrained CharSequence, Collection, Map, or Array is valid as long as it's not null, but it
            can be empty <br>
            - @NotEmpty: a constrained CharSequence, Collection, Map, or Array is valid as long as it's not null and its
            size/length is greater than zero <br>
            - @NotBlank: a constrained String is valid as long as it's not null and the trimmed length is greater than
            zero <br>
        </div>

        <div class="one-point">
            9) @Valid, @Validated <br>
            - <a
                href="https://stackoverflow.com/questions/36173332/difference-between-valid-and-validated-in-spring">Source</a>
            <br>
            - <code>@Valid</code> is the standard validation available. <code>@Validated</code> is a Spring-specific
            validation that gives us some other functionality on top of <code>@Valid</code>, like Validation Groups. But
            <code>@Valid</code> should satisfy our needs for now.

        </div>

        <div class="one-point">
            10) @ExceptionHandler <br>
            -

        </div>

        <div class="one-point">
            11) Validation Related: <br>
            - @NotNull, @Size(min = 2, max = 32), @Min(2), @Max(100), @Email <br>
            - Note that @Min, @Max combo allow null values to be passed as valid values. <a
                href="https://stackoverflow.com/questions/46493670/java-validation-min-max-annotion-for-null-values">SO
            Source</a>

        </div>

        <div class="one-point">
            12) @Transactional, @Cacheable, @EnableCaching <br>
            -

        </div>
    </div>


</div>

</body>
</html>
