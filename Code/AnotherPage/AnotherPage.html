<!DOCTYPE html>
<html lang="en">
<head>
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
          integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
          crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
          integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
          crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
          integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
          crossorigin="anonymous"></script>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-9QJ5D3X353"></script>
  <script>
      window.dataLayer = window.dataLayer || [];

      function gtag() {
          dataLayer.push(arguments);
      }

      gtag('js', new Date());
      gtag('config', 'G-9QJ5D3X353');
  </script>
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,300;0,400;0,500;1,400&display=swap"
        rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="../../globalStyles.css">
  <meta name="author" content="Raj Gaurav Ballabh Kumar">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AnotherPage</title>
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top">

  <div class="navbar-header">
    <a href="../../index.html" class="navbar-brand"> rgbk21</a>
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"><span
    class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="nav navbar-nav">
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Projects</a>
        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
          <a class="dropdown-item" href="../../Projects/TwitterCritNodes/TwitterCritNodes_1.html">Identifying Critical Nodes on Twitter</a>
          <a class="dropdown-item" href="../../Projects/isRelatedTo/isRelatedTo.html">isRelatedTo</a>
          <div class="dropdown-divider"></div>
        </div>
      </li>
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">HTML Projects</a>
        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
          <a class="dropdown-item" href="../../WordleCheater/index.html">Wordle Cheater</a>
          <a class="dropdown-item" href="../../Pig_Game/index.html">2-Player Pig Game</a>
          <a class="dropdown-item" href="../../ImageGallery/ImageGallery.html">Image Gallery</a>
          <a class="dropdown-item" href="../../RGB_Guesser_Game/RGB.html">RGB Guesser Game</a>
          <a class="dropdown-item" href="../../ToDoList/todo.html">To-Do List</a>
          <div class="dropdown-divider"></div>
        </div>
      </li>
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Notes</a>
        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
          <a class="dropdown-item" href="../../Lectures/COMS_631/COMS_631_index.html">COMS 631</a>
          <a class="dropdown-item" href="../../Lectures/COMS_535/COMS_535_index.html">COMS 535</a>
          <a class="dropdown-item" href="../../Lectures/EffectiveJava/EffectiveJava.html">Effective Java</a>
          <a class="dropdown-item" href="../../Lectures/DI/DI.html">Dependency Injection</a>
          <div class="dropdown-divider"></div>
        </div>
      </li>
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Code</a>
        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
          <a class="dropdown-item" href="../../Code/ThingsToRemember/ThingsToRemember.html">Things To Remember</a>
          <a class="dropdown-item" href="../../Code/Java_Notes/JavaNotes.html">Java Notes</a>
          <a class="dropdown-item" href="../../Code/Java_Notes/JavaNotes_2.html">Java Notes 2</a>
          <a class="dropdown-item" href="../../Code/LeetCode/LeetCode.html">LeetCode Notes</a>
          <a class="dropdown-item" href="../../Code/Applying_Java_Notes/ApplyingJava_Notes.html">ApplyingJava Notes</a>
          <a class="dropdown-item" href="../../Code/JavaScript/JavaScript.html">JavaScript Notes</a>
          <a class="dropdown-item" href="../../Code/HTML_CSS/HTML_CSS_Basics.html">HTML & CSS Notes</a>
          <a class="dropdown-item" href="../../Code/SQL/SQL.html">SQL Notes</a>
          <a class="dropdown-item" href="../../Code/Spring/Spring.html">Spring Notes</a>
          <a class="dropdown-item" href="../../Code/Kafka/Kafka.html">Kafka Notes</a>
          <a class="dropdown-item" href="../../Code/Angular/Angular.html">Angular</a>
          <a class="dropdown-item" href="../../Code/Hibernate/Hibernate.html">Hibernate</a>
          <div class="dropdown-divider"></div>
        </div>
      </li>
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">In Another Life</a>
        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
          <a class="dropdown-item" href="../../InAnotherLife/Chapter1/Chapter1.html">Chapter 1</a>
          <a class="dropdown-item" href="../../InAnotherLife/Chapter2/Chapter2.html">Chapter 2</a>
          <a class="dropdown-item" href="../../InAnotherLife/Chapter3/Chapter3.html">Chapter 3</a>
          <div class="dropdown-divider"></div>
        </div>
      </li>
    </ul>


    <ul class="navbar-nav ml-auto">
      <li class="nav-item active"><a class="nav-link" href="https://github.com/rgbk21">GitHub</a></li>
      <li class="nav-item active"><a class="nav-link" href="https://www.linkedin.com/in/raj-gaurav-ballabh-kumar-97002058/">LinkedIn</a></li>
      <li class="nav-item active"><a class="nav-link" href="https://www.instagram.com/wobblyframes/">Instagram</a></li>
      <li class="nav-item active"><a class="nav-link" href="https://www.facebook.com/SomeRandomThoughts">Facebook</a></li>
    </ul>
  </div>
</nav>

<div class="container">

  <button id='load-all-gists' type="button" class="btn btn-outline-primary">Show all Gists!</button>

  <div>
    This page contains my notes from the following books: <br>

  </div>


  <br>
  Index for Book: <br>
  Chapter 0 - <a href="#InterestingLinks">Interesting Links</a> <br>
  Chapter 1 - <a href="#Chapter1">Introduce a presenter for the view class</a> <br>
  Chapter 2 - <a href="#Chapter2">Injecting mock objects to fields defined as <code>final</code></a> <br>
  Chapter 3 - <a href="#Chapter3">Using <code>static</code> factory to inject dependencies</a> <br>

  <br>

  <hr>
  <div id="InterestingLinks" class="chapter">Interesting Links</div>
  <hr>

  <div class="textual-content">

    <div class="sub-heading">Links</div>
    <div>
      -
    </div>
  </div>

  <hr>
  <div id="Chapter1" class="chapter">Chapter 1: Introduce a presenter for the view class</div>
  <hr>

  <div class="textual-content">

    <div class="sub-heading">Initial Setup before change</div>
    <div>
      - We have the <i>PersonView</i> class which defines certain methods on it. This view is being used in the <i>LifeEvent</i> class. The <i>LifeEvent</i> class is (assume)
      injected with a <i>PersonView</i> class. On this instance of <i>PersonView</i>, the <i>LifeEvent</i> class calls multiple methods. <br>
      - What we want to change over here is that we want to introduce a <i>PersonPresenter</i>, that will be injected into the <i>LifeEvent</i>, and instead of calling the methods
      on the instance of <i>PersonView</i>, we will instead be calling the methods on the instance of <i>PersonPresenter</i>. And that <i>PersonPresenter</i> will then delegate to
      the corresponding method in the <i>PersonView</i> class. <br>
      - This is the flow of control right now. As you can see, it's pretty straightforward:
      <img src="imgs/PreStatus.png"
           class="center-block img-fluid"
           alt="EmailMessagingService"
           width="1200">
    </div>


    <div class="sub-heading">Introducing the Presenter and View interfaces following the MVP Model</div>
    <div>
      - The first step will be to add a Presenter class for the <i>PersonView</i>. For this we are going to add two new interfaces that are going to "bind" the presenter to the
      view. This follows the <a href="https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93presenter">MVP model</a>.
      <div class="code-block">
        <div class="expand-code-snip-btn border border-primary rounded">
          <span class="btn btn-link">Expand Gist <img src="imgs/chevron-expand.svg" alt="Expand Code Snippet"></span>
        </div>
        <div class="code-snippet">
          <script src="https://gist.github.com/rgbk21/0d244dc235d0b7ad1b9082c13e39d130.js"></script>
        </div>
      </div>
    </div>

    <div class="sub-heading">Adding a Presenter for <i>PersonView</i></div>
    <div>
      - Now that we have the interfaces set up, the next step is to add the <i>PersonPresenter</i> using the MVP model that we specified above. This is what the
      <i>PersonPresenter</i> class looks like:
      <div class="code-block">
        <div class="expand-code-snip-btn border border-primary rounded">
          <span class="btn btn-link">Expand Gist <img src="imgs/chevron-expand.svg" alt="Expand Code Snippet"></span>
        </div>
        <div class="code-snippet">
          <script src="https://gist.github.com/rgbk21/9d7839975445771cbf5b8d6d1173365b.js"></script>
        </div>
      </div>

      - Corresponding to this, we will now have to change the <i>PersonView</i> class so that it <code>implements</code> the <i>PersonPresenter.Display</i> interface that we
      created above. This is what the modified <i>PersonView</i> class looks like:
      <div class="code-block">
        <div class="expand-code-snip-btn border border-primary rounded">
          <span class="btn btn-link">Expand Gist <img src="imgs/chevron-expand.svg" alt="Expand Code Snippet"></span>
        </div>
        <div class="code-snippet">
          <script src="https://gist.github.com/rgbk21/cc460ee3dca6a9f3b848bd04fbfdad3e.js"></script>
        </div>
      </div>

      - The things to highlight are in here:
      <img src="imgs/PostStatus_AfterAddingPresenter.png"
           class="center-block img-fluid"
           alt="EmailMessagingService"
           width="1600">
    </div>


    <div class="sub-heading">Re-routing all calls to the view to instead go through the presenter</div>
    <div>
      - By adding the presenter for the <i>PersonView</i> class, we have setup the skeleton code that we need to enable us to manage the view through the presenter. <br>
      - The way we do this is: <br>
      a) We note all the methods that are being called on the <i>PersonView</i> class from other classes. <br>
      b) We add all those methods to the <i>PersonPresenter</i> and to the <i>Display</i> interface defined within it. <br>
      c) Add <code>@Override</code> annotation to the corresponding method in the <i>PersonView</i> class. <br>
      d) Replace the instances of <i>PersonView</i> being used in the other classes, with instances of <i>PersonPresenter</i> instead. <br>

      <br><br>

      a) These are the methods that are being called on the <i>PersonView</i>:
      <img src="imgs/Step1_MethodsUsagesInPersonView.png"
           class="center-block img-fluid"
           alt="MethodsUsagesInPersonView"
           width="1400">

      <br>
      <br>

      b) Add methods to the interface and to the <i>PersonPresenter</i> class:
      <img src="imgs/Step2_AddingMethodsToInterface.png"
           class="center-block img-fluid"
           alt="MethodsUsagesInPersonView"
           width="1600">

      <br>
      <br>

      c) Add <code>@Override</code> annotation to the view methods that were added to the interface: <br>
      <img src="imgs/Step3_AddOverride.png"
           class="center-block img-fluid"
           alt="MethodsUsagesInPersonView"
           width="1600">

      <br>
      <br>

      d) Remove <i>PersonView</i> from other classes, and instead use <i>PersonPresenter</i>: <br>
      <img src="imgs/Step4_ReplaceViewWithPresenter.png"
           class="center-block img-fluid"
           alt="MethodsUsagesInPersonView"
           width="1600">

      <br>
      <br>

      - So to recap, the final flow of control is going to look like this: <br>
      <img src="imgs/FinalControlFlow.png"
           class="center-block img-fluid"
           alt="MethodsUsagesInPersonView"
           width="1600">

      <br>
      <br>

      - There is a certain amount of hand-waviness going on over here, because we have intrinsically changed the order of the execution of the code. Earlier, the <i>PersonView</i>
      was being injected into the <i>LifeEvent</i> class. Hence, that is where the <i>PersonView</i> was being expected to be created. But now, we have replaced the
      <i>PersonView</i> with the <i>PersonPresenter</i>, and the <i>PersonView</i> is never instantiated. So for the sake of this example, assume that a <i>PersonView</i> instance
      has already been created and associated with the <i>PersonPresenter</i> class by invoking it's <i>bindView</i> method.
    </div>

    <div class="sub-heading">Refactoring the <i>PersonView</i> to move common logic to the <i>PersonPresenter</i></div>
    <div>
      - We want to be sending data from the presenter to the view via methods defined on <i>Display</i>. And only triggering presenter methods from the view when UI actions are
      taken. In general, we update the view/presenter interface so that the data flow works like this: <br>
      a) Presenter sends data needed to the view. This is all the data that the view needs for rendering. More specifically, we want to avoid patterns where the view has to reach
      out to the presenter for any data that it needs, and instead have the presenter send the data. <br>
      b) View sends UI events back to the presenter, which usually trigger a refresh (step 1 again). Similar to the above case, we want to avoid cases where we have the presenter
      reaching out to the view to get some data that was modified due to user input. Ideally, we want the event listeners defined on the view to update the presenter whenever data
      is changed. <br>
      - The intention is to move business logic from the view to the presenter. This includes any logic that is not directly related to UI/rendering. <br>
      - For instance, this is what the view/presenter looks like before the refactor. The logic to <i>validateAddress</i> is not specifically related to the UI, and hence can be
      moved to the presenter.
      <img src="imgs/PreRefactor.png"
           class="center-block img-fluid"
           alt="EmailMessagingService"
           width="1600">

      - This is what the view/presenter looks after the refactor has been done:
      <img src="imgs/PostRefactor.png"
           class="center-block img-fluid"
           alt="EmailMessagingService"
           width="1600">
    </div>

    <div class="sub-heading">Views can contain sub-views of their own</div>
    <div>
      - A view might contain other views inside it. For example, the <i>PersonView</i> might have a subview for a dropdown that allows the end-user to change the height of the
      user. This dropdown is now a sub-view, that needs a presenter of its own. This presenter will be injected into the <i>PersonPresenter</i>, and will be controlled from there.
      Point is, the <i>PersonView</i> does not need to know about how the dropdown is being managed. When a value on the dropdown changes, the view updates the
      <i>PersonPresenter</i> with the new value, and the <i>PersonPresenter</i> can then make sure that the presenter for the dropdown is made aware of the change.
    </div>
  </div>


  <hr>
  <div id="Chapter2" class="chapter">Chapter 2: Injecting mock objects to fields defined as <code>final</code></div>
  <hr>

  <div class="textual-content">
    <div class="sub-heading">Initial Setup before change</div>
    <div>
      - // Look at PropertyPathEditorPresenter
    </div>
  </div>

  <hr>
  <div id="Chapter3" class="chapter">Chapter 3: Using <code>static</code> factory to inject dependencies</div>
  <hr>

  <div class="textual-content">
    <div class="sub-heading">Initial Setup before change</div>
    <div>
      - // Look at PathEditorPopup
    </div>
  </div>
</div>


<script src="../../script.js"></script>
</body>
</html>
